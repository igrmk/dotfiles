# vim: filetype=gitconfig

[core]
   excludesfile = ~/.config/git/ignore
   filemode = true
   autocrlf = false
   editor = vi
   abbrev = 8
[color]
   diff = auto
   status = auto
   branch = auto
[alias]
   ap = add -p
   st = status
   st-no-designer = status -- ':!*.Designer.cs'
   st-no-vendor = status -- ':!vendor'
   sw = switch
   swd = switch --detach
   rrr = restore

   diff = diff --find-copies --patience

   d-no-designer = d -- ':!*.Designer.cs'
   d-no-vendor = d -- ':!vendor'
   dc-no-designer = dc -- ':!*.Designer.cs'
   dc-no-vendor = dc -- ':!vendor'

   ddt = !git difftool --dir-diff --tool=difftastic
   dcdt = ddt --cached

   dk = !git difftool --dir-diff --tool=kdiff3
   dck = dk --cached

   dm = !git difftool --dir-diff --tool=meld
   dcm = dm --cached

   dt  = difftool
   dtc = dt --cached

   dw  = diff --find-copies --patience --color-words
   dcw = dw --cached

   dd  = -c core.pager=delta diff --find-copies --patience
   dcd = dd --cached

   dr  = -c core.pager=riff diff --find-copies --patience
   dcr = dr --cached

   # default
   d = dr
   dc = d --cached

   lp-no-designer = log -p -M -- ':!*.Designer.cs'
   lpdt  = "!GIT_EXTERNAL_DIFF=difft git log -p -M --ext-diff"
   lpd = -c core.pager=delta log -p -M
   lpr = -c core.pager=riff log -p -M
   glog = log --graph --oneline --pretty=fuller --author-date-order
   gloga = gloga --all
   lp = lpr

   overview = log --graph --oneline --pretty=fuller --author-date-order --all --simplify-by-decoration
   dry = commit --dry-run -a
   unamend = reset --soft HEAD@{1}
   unmerge = git reset --hard ORIG_HEAD
   get-submodules = submodule update --init --recursive
   squash-all = "!f(){ [ ! -z \"$1\" ] && git reset $(git commit-tree HEAD^{tree} -m \"$1\"); };f"
   stash-unstaged = "!f() { cd ${GIT_PREFIX:-./}; git stash push --keep-index --include-untracked -- $(git ls-files --modified --others --exclude-standard); }; f"
   bz = "!f() { cd ${GIT_PREFIX:-./}; echo -- $(git ls-files --modified --others --exclude-standard); }; f"
   conflicts = diff --name-only --diff-filter=U
   force-clean-all = clean -fdx
   untrack = rm --cached
[user]
   name = Igor Mikushkin
   email = igor.mikushkin@gmail.com
[diff]
   colorMoved = default
   colorMovedWs = allow-indentation-change
   tool = kdiff3
   pager = less -SFXM +Gg
[difftool]
   prompt = false
[push]
   default = current
   autoSetupRemote = true
   followTags = true
[mergetool]
   prompt = false
   keepBackup = false
   keepTemporaries = false
[merge]
   tool = kdiff3
[log]
   abbrevCommit = true
   decorate = true
   follow = true
[color "diff"]
   old = red reverse
   new = green reverse
   oldMoved = cyan reverse
   newMoved = yellow reverse
   whitespace = red reverse
[init]
   defaultBranch = main
[tag]
   sort = -version:refname
[difftool "kdiff3"]
   cmd = kdiff3 --cs FullAnalysis=1 --cs ShowLineNumbers=1 --cs SkipDirStatus=1 --cs FollowDirLinks=1 --cs FollowFileLinks=1 "$LOCAL" "$REMOTE"
[difftool "difftastic"]
   cmd = difft "$LOCAL" "$REMOTE"
[diff "hex"]
   textconv = hexdump -v -C
   binary = true
[delta]
   syntax-theme             = None
   side-by-side             = true
   plus-style               = green
   plus-emph-style          = bold green reverse
   minus-style              = red
   minus-emph-style         = bold red reverse
   line-numbers-minus-style = red
   line-numbers-plus-style  = green
   line-numbers-zero-style  = gray
   wrap-left-symbol = ▽
   wrap-right-symbol = ▽
   wrap-right-prefix-symbol = △

# Must be last to override earlier settings
[include]
   path = os
   path = local

# To apply settings for e.g. your work account,
# add this to `local`:
#
#    [includeIf "hasconfig:remote.*.url:git@gitlab.com:your_company/**"]
#       path = your_company
#
# and this to `your_company`:
#
#    [core]
#       sshCommand = ssh -i ~/.ssh/your_company_ssh_private_key
#    [user]
#       name = John Dow
#       email = john.dow@your_company.com
